<!DOCTYPE html>
<html class="light" lang="fr">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Journal de Bord - Amazonie Project</title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,opsz,wght@0,6..72,200..800;1,6..72,200..800&amp;family=Noto+Sans:wght@400;500;700&amp;display=swap" rel="stylesheet"/>
    <!-- Material Symbols -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>

        <!-- Tailwind CSS (config must be defined BEFORE loading the CDN script) -->
        <script id="tailwind-config">
                window.tailwind = window.tailwind || {};
                window.tailwind.config = {
                        darkMode: "class",
                        theme: {
                                extend: {
                                        colors: {
                                                "primary": "#11d452",
                                                "primary-dark": "#0ea640",
                                                "background-light": "#f6f8f6",
                                                "background-dark": "#102216",
                                                "card-light": "#ffffff",
                                                "card-dark": "#1a2e22",
                                                "text-main": "#111813",
                                                "text-dark": "#f0f4f2",
                                                "muted-green": "#61896f",
                                                "forest-dark": "#1e3a29",
                                                "earth-light": "#e8e6df",
                                                "alert": "#ef4444",
                                                "alert-soft": "#fef2f2",
                                                "danger": "#e3342f",
                                                "paper": "#ffffff",
                                                "paper-dark": "#1a2c20",
                                        },
                                        fontFamily: {
                                                "display": ["Newsreader", "serif"],
                                                "sans": ["Noto Sans", "sans-serif"],
                                                "body": ["Noto Sans", "sans-serif"],
                                        },
                                        borderRadius: {"DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "2xl": "1rem", "full": "9999px"},
                                        boxShadow: {
                                                'soft': '0 4px 20px -2px rgba(0, 0, 0, 0.05)',
                                        },
                                },
                        },
                };
        </script>
        <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

    <script>
        // If Tailwind CDN is blocked, inject a small fallback CSS so the page stays readable/styled.
        (function () {
            function isTailwindLoaded() {
                try {
                    var test = document.createElement('div');
                    test.className = 'hidden';
                    document.body.appendChild(test);
                    var ok = window.getComputedStyle(test).display === 'none';
                    test.remove();
                    return ok;
                } catch (_) {
                    return false;
                }
            }

            function injectFallbackCss() {
                if (document.getElementById('tw-fallback')) return;

                var style = document.createElement('style');
                style.id = 'tw-fallback';
                style.textContent = [
                    ':root{--primary:#11d452;--forest:#1e3a29;--bg:#f6f8f6;--border:#e0e4e2;--text:#111813;}',
                    'html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:"Noto Sans",system-ui,-apple-system,"Segoe UI",Roboto,sans-serif;}',
                    'a{color:var(--primary);text-decoration:none;}',
                    'a:hover{text-decoration:underline;}',
                    'code{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;}',
                    'header{position:sticky;top:0;z-index:50;background:rgba(255,255,255,0.95);backdrop-filter:blur(8px);border-bottom:1px solid var(--border);}',
                    'main{padding:24px 16px;}',
                    'h1,h2,h3{color:var(--forest);}',
                    '',
                    '/* Minimal utility fallbacks for the most used classes */',
                    '[class~="bg-background-light"]{background:var(--bg);}',
                    '[class~="bg-white"]{background:#fff;}',
                    '[class~="text-primary"]{color:var(--primary);}',
                    '[class~="text-forest-dark"]{color:var(--forest);}',
                    '[class~="border"]{border:1px solid var(--border);}',
                    '[class~="border-gray-100"],[class~="border-gray-200"]{border-color:var(--border);}',
                    '[class~="shadow-sm"]{box-shadow:0 1px 2px rgba(0,0,0,0.06);}',
                    '[class~="rounded-lg"]{border-radius:0.5rem;}',
                    '[class~="rounded-xl"]{border-radius:0.75rem;}',
                    '[class~="p-4"]{padding:1rem;}',
                    '[class~="p-5"]{padding:1.25rem;}',
                    '[class~="p-6"]{padding:1.5rem;}',
                    '[class~="mb-2"]{margin-bottom:0.5rem;}',
                    '[class~="mb-3"]{margin-bottom:0.75rem;}',
                    '[class~="mb-4"]{margin-bottom:1rem;}',
                    '[class~="mb-6"]{margin-bottom:1.5rem;}',
                    '[class~="mb-10"]{margin-bottom:2.5rem;}',
                    '[class~="space-y-3"] > * + *{margin-top:0.75rem;}',
                    '[class~="space-y-4"] > * + *{margin-top:1rem;}',
                    '',
                    '/* Basic layout helpers */',
                    '[class~="flex"]{display:flex;}',
                    '[class~="flex-col"]{flex-direction:column;}',
                    '[class~="items-center"]{align-items:center;}',
                    '[class~="justify-between"]{justify-content:space-between;}',
                    '[class~="gap-2"]{gap:0.5rem;}',
                    '[class~="gap-3"]{gap:0.75rem;}',
                    '[class~="gap-4"]{gap:1rem;}'
                ].join('\n');
                document.head.appendChild(style);
            }

            function check() {
                if (!isTailwindLoaded()) {
                    document.documentElement.dataset.tw = 'fallback';
                    injectFallbackCss();
                } else {
                    document.documentElement.dataset.tw = 'ok';
                }

                var boot = document.getElementById('boot-status');
                if (boot && boot.querySelector) {
                    var existing = boot.querySelector('[data-tw-indicator]');
                    if (!existing) {
                        var p = document.createElement('p');
                        p.setAttribute('data-tw-indicator', 'true');
                        p.style.margin = '8px 0 0';
                        p.style.opacity = '0.85';
                        p.textContent = (document.documentElement.dataset.tw === 'ok')
                            ? 'Style: Tailwind OK.'
                            : 'Style: mode secours (Tailwind non chargé).';
                        var container = boot.querySelector('div');
                        if (container) container.appendChild(p);
                    }
                }
            }

            window.addEventListener('DOMContentLoaded', function () {
                // give the CDN a moment to load
                setTimeout(check, 1200);
            });
        })();
    </script>

    <style>
        .barred-bg {
            background-size: 20px 20px;
            background-image: repeating-linear-gradient(
                45deg,
                rgba(239, 68, 68, 0.03),
                rgba(239, 68, 68, 0.03) 10px,
                rgba(239, 68, 68, 0.08) 10px,
                rgba(239, 68, 68, 0.08) 20px
            );
        }
        .strikethrough-red {
            position: relative;
            display: inline-block;
        }
        .strikethrough-red::after {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            width: 100%;
            height: 3px;
            background-color: #e3342f;
            transform: rotate(-5deg);
            opacity: 0.8;
        }
        .paper-texture {
            background-image: linear-gradient(#f6f8f6 2px, transparent 2px), linear-gradient(90deg, #f6f8f6 2px, transparent 2px);
            background-size: 40px 40px, 40px 40px;
            background-position: -2px -2px, -2px -2px;
        }
        .dark .paper-texture {
             background-image: linear-gradient(#1a2c20 2px, transparent 2px), linear-gradient(90deg, #1a2c20 2px, transparent 2px);
        }
    </style>
</head>
<body>
    <div id="root">
        <div id="boot-status" style="font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; padding: 24px; color: #111813;">
            <div style="max-width: 900px; margin: 0 auto;">
                <h1 style="font-size: 20px; font-weight: 800; margin: 0 0 8px;">Chargement…</h1>
            </div>
        </div>
    </div>

    <script>
        (function () {
            function escapeHtml(s) {
                return String(s)
                    .replace(/&/g, '&amp;')
                    .replace(/</g, '&lt;')
                    .replace(/>/g, '&gt;')
                    .replace(/"/g, '&quot;')
                    .replace(/'/g, '&#039;');
            }

            function showBootError(title, details) {
                var root = document.getElementById('root');
                if (!root) return;

                var detailHtml = details ? ('<pre style="white-space:pre-wrap;background:#f6f8f6;border:1px solid #e0e4e2;border-radius:8px;padding:12px;overflow:auto;">' + escapeHtml(details) + '</pre>') : '';

                root.innerHTML =
                    '<div style="font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; padding: 24px; color:#111813;">' +
                    '  <div style="max-width: 900px; margin: 0 auto;">' +
                    '    <h1 style="font-size: 20px; font-weight: 900; margin: 0 0 8px;">' + escapeHtml(title) + '</h1>' +
                    '    <p style="margin: 0 0 12px; opacity: 0.9; line-height: 1.4;">' +
                    '      Astuce : ouvre le fichier via un serveur local (ex. <code>py -m http.server 8000</code>) puis va sur <code>http://localhost:8000/emc.html</code>. ' +
                    '      Si tu es sur un réseau filtré (lycée), les CDNs <code>unpkg.com</code> / <code>cdn.tailwindcss.com</code> peuvent être bloqués.' +
                    '    </p>' +
                    detailHtml +
                    '  </div>' +
                    '</div>';
            }

            window.__showBootError = showBootError;

            window.addEventListener('error', function (event) {
                try {
                    var msg = event && (event.message || (event.error && event.error.message)) || 'Erreur JavaScript.';
                    var stack = event && event.error && event.error.stack ? event.error.stack : '';
                    showBootError('Erreur au chargement de la page', msg + (stack ? "\n\n" + stack : ''));
                } catch (_) {
                    // ignore
                }
            });

            window.addEventListener('unhandledrejection', function (event) {
                try {
                    var reason = event && event.reason;
                    var details = reason && (reason.stack || reason.message) ? (reason.stack || reason.message) : String(reason);
                    showBootError('Promesse rejetée (unhandledrejection)', details);
                } catch (_) {
                    // ignore
                }
            });

            // If core libs don't arrive (blocked CDNs), surface a helpful message.
            setTimeout(function () {
                if (!window.React || !window.ReactDOM || !window.ReactRouterDOM) {
                    showBootError(
                        'Dépendances externes non chargées',
                        'React/ReactDOM/ReactRouterDOM ne sont pas disponibles. Cela arrive quand le réseau bloque les CDNs (unpkg/tailwind) ou en ouverture directe via file://.'
                    );
                }
            }, 2500);
        })();
    </script>

    <!-- React Dependencies -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/history@5/umd/history.development.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/react-router@6.3.0/umd/react-router.development.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/react-router-dom@6.3.0/umd/react-router-dom.development.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js" crossorigin="anonymous"></script>

    <script>
        // CDN fallback loader: if unpkg/cdn.tailwind are blocked, try jsDelivr.
        (function () {
            function loadScript(url) {
                return new Promise(function (resolve, reject) {
                    var s = document.createElement('script');
                    s.src = url;
                    s.async = true;
                    s.crossOrigin = 'anonymous';
                    s.referrerPolicy = 'no-referrer';
                    s.onload = function () { resolve(url); };
                    s.onerror = function () { reject(new Error('Failed to load: ' + url)); };
                    document.head.appendChild(s);
                });
            }

            function ensureDepsWithFallback() {
                // Wait a moment for primary CDNs.
                setTimeout(function () {
                    var missing = [];
                    if (!window.React) missing.push('React');
                    if (!window.ReactDOM) missing.push('ReactDOM');
                    if (!window.ReactRouterDOM) missing.push('ReactRouterDOM');
                    if (!window.Babel) missing.push('Babel');

                    if (missing.length === 0) return;

                    // Attempt fallback from jsDelivr.
                    var chain = Promise.resolve();
                    if (!window.React) chain = chain.then(function () { return loadScript('https://cdn.jsdelivr.net/npm/react@18/umd/react.development.js'); });
                    if (!window.ReactDOM) chain = chain.then(function () { return loadScript('https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.development.js'); });
                    // history/react-router/react-router-dom UMD builds
                    if (!window.HistoryLibrary) chain = chain.then(function () { return loadScript('https://cdn.jsdelivr.net/npm/history@5/umd/history.development.js'); });
                    if (!window.ReactRouter) chain = chain.then(function () { return loadScript('https://cdn.jsdelivr.net/npm/react-router@6.3.0/umd/react-router.development.js'); });
                    if (!window.ReactRouterDOM) chain = chain.then(function () { return loadScript('https://cdn.jsdelivr.net/npm/react-router-dom@6.3.0/umd/react-router-dom.development.js'); });
                    if (!window.Babel) chain = chain.then(function () { return loadScript('https://cdn.jsdelivr.net/npm/babel-standalone@6/babel.min.js'); });

                    chain.catch(function (e) {
                        if (window.__showBootError) {
                            window.__showBootError(
                                'Impossible de charger les bibliothèques (CDN bloqué)',
                                (e && (e.stack || e.message)) ? (e.stack || e.message) : String(e)
                            );
                        }
                    });
                }, 800);
            }

            // Fire-and-forget; actual app boot is handled by Babel once available.
            ensureDepsWithFallback();
        })();
    </script>

    <script type="text/babel">
        const { useState } = React;
        const { createRoot } = ReactDOM;
        const { MemoryRouter, Routes, Route, Link } = ReactRouterDOM;

        const TopHeader = ({ current }) => {
            const [mobileOpen, setMobileOpen] = useState(false);
            const [seancesOpen, setSeancesOpen] = useState(false);

            const seanceLinks = [
                { to: '/', label: 'Séance 1' },
                { to: '/seance-2', label: 'Séance 2' },
                { to: '/inter-seance', label: 'Inter-Séance' },
                { to: '/seance-3', label: 'Séance 3' },
            ];

            const isActive = (path) => current === path;
            const isSeancesSection = seanceLinks.some((l) => l.to === current);

            const baseLink = 'text-forest-dark dark:text-gray-300 hover:text-primary transition-colors text-base font-medium leading-normal';
            const activeLink = "text-primary text-base font-bold leading-normal relative after:content-[''] after:absolute after:bottom-[-22px] after:left-0 after:w-full after:h-[2px] after:bg-primary";

            return (
                <header className="border-b border-solid border-b-[#e0e4e2] dark:border-b-gray-800 bg-white/95 dark:bg-[#152e20]/95 backdrop-blur-md px-4 md:px-10 py-3 sticky top-0 z-50">
                    <div className="flex items-center justify-between whitespace-nowrap">
                        <div className="flex items-center gap-4 text-forest-dark dark:text-white">
                            <div className="size-8 text-primary flex items-center justify-center">
                                <span className="material-symbols-outlined !text-[32px]">forest</span>
                            </div>
                            <h2 className="text-forest-dark dark:text-white text-xl font-bold leading-tight tracking-[-0.015em]">Carnet de Bord EMC</h2>
                        </div>

                        <div className="flex flex-1 justify-end gap-4 items-center">
                            <nav className="hidden md:flex items-center gap-9">
                                <Link className={isActive('/') ? activeLink : baseLink} to="/">Accueil</Link>

                                <div className="relative">
                                    <button
                                        type="button"
                                        className={isSeancesSection ? activeLink : baseLink}
                                        onClick={() => setSeancesOpen((v) => !v)}
                                    >
                                        Séances
                                        <span className="material-symbols-outlined align-middle ml-1 !text-[18px]">expand_more</span>
                                    </button>
                                    {seancesOpen && (
                                        <div
                                            className="absolute right-0 mt-3 w-56 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-[#152e20] shadow-lg overflow-hidden"
                                            onMouseLeave={() => setSeancesOpen(false)}
                                        >
                                            {seanceLinks.map((item) => (
                                                <Link
                                                    key={item.to}
                                                    to={item.to}
                                                    className="block px-4 py-2.5 text-sm font-medium text-forest-dark dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-white/10"
                                                    onClick={() => setSeancesOpen(false)}
                                                >
                                                    {item.label}
                                                </Link>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            </nav>

                            <button
                                type="button"
                                className="md:hidden text-forest-dark dark:text-gray-200"
                                onClick={() => setMobileOpen((v) => !v)}
                                aria-label="Ouvrir le menu"
                            >
                                <span className="material-symbols-outlined">menu</span>
                            </button>
                        </div>
                    </div>

                    {mobileOpen && (
                        <div className="md:hidden mt-3 pb-2 border-t border-gray-100 dark:border-gray-800">
                            <div className="flex flex-col gap-1 pt-3">
                                <Link className="px-2 py-2 rounded-lg hover:bg-gray-50 dark:hover:bg-white/10" to="/" onClick={() => setMobileOpen(false)}>Accueil</Link>
                                <div className="px-2 pt-2 text-xs uppercase tracking-wider text-gray-500 dark:text-gray-400 font-sans font-bold">Séances</div>
                                {seanceLinks.map((item) => (
                                    <Link
                                        key={item.to}
                                        className="px-2 py-2 rounded-lg hover:bg-gray-50 dark:hover:bg-white/10"
                                        to={item.to}
                                        onClick={() => setMobileOpen(false)}
                                    >
                                        {item.label}
                                    </Link>
                                ))}
                            </div>
                        </div>
                    )}
                </header>
            );
        };

        const BottomArrowsNav = ({ prev, next }) => {
            return (
                <div className="flex items-center justify-between pt-8 mt-4 border-t border-gray-100 dark:border-[#2a3e32]">
                    {prev ? (
                        <Link className="group flex items-center gap-3 text-gray-500 dark:text-gray-400 hover:text-text-main dark:hover:text-white transition-colors" to={prev.to}>
                            <div className="w-8 h-8 rounded-full border border-gray-200 dark:border-gray-700 flex items-center justify-center group-hover:bg-gray-100 dark:group-hover:bg-[#2a3e32]">
                                <span className="material-symbols-outlined text-sm">arrow_back</span>
                            </div>
                            <span className="text-sm font-medium">{prev.label}</span>
                        </Link>
                    ) : (
                        <div />
                    )}

                    {next ? (
                        <Link className="group flex items-center gap-3 text-primary hover:text-primary/80 transition-colors" to={next.to}>
                            <span className="text-sm font-bold">{next.label}</span>
                            <div className="w-8 h-8 rounded-full bg-primary flex items-center justify-center text-white shadow-md group-hover:shadow-lg group-hover:scale-105 transition-all">
                                <span className="material-symbols-outlined text-sm">arrow_forward</span>
                            </div>
                        </Link>
                    ) : (
                        <div />
                    )}
                </div>
            );
        };

        const SeancesSidebar = ({ current }) => {
            const links = [
                { to: '/', label: 'Séance 1' },
                { to: '/seance-2', label: 'Séance 2' },
                { to: '/inter-seance', label: 'Inter-Séance' },
                { to: '/seance-3', label: 'Séance 3' },
            ];

            const base = "pl-4 py-2 text-sm text-gray-500 hover:text-forest-dark dark:text-gray-400 dark:hover:text-gray-200 transition-colors";
            const active = "pl-4 py-2 text-sm font-medium border-l-2 border-primary -ml-[2px] text-forest-dark dark:text-white";

            // Calcul dynamique du pourcentage en fonction de la page actuelle
            const progressMap = {
                '/': 25,
                '/seance-2': 50,
                '/inter-seance': 75,
                '/seance-3': 100
            };
            const progress = progressMap[current] || 25;
            const isComplete = progress === 100;

            return (
                <aside className="hidden md:flex flex-col w-64 shrink-0 sticky top-24 h-fit gap-6">
                    <div>
                        <p className="text-xs uppercase tracking-wider text-gray-500 dark:text-gray-400 font-sans font-bold mb-3">Navigation</p>
                        <nav className="flex flex-col gap-1 border-l-2 border-gray-200 dark:border-gray-700 ml-2">
                            {links.map((l) => (
                                <Link key={l.to} className={current === l.to ? active : base} to={l.to}>
                                    {l.label}
                                </Link>
                            ))}
                        </nav>
                    </div>
                    <div className="bg-white dark:bg-[#1a3324] p-4 rounded-xl border border-gray-100 dark:border-gray-800 shadow-sm">
                        <p className="text-xs uppercase tracking-wider text-gray-500 dark:text-gray-400 font-sans font-bold mb-2">Statut du Projet</p>
                        <div className="flex items-center gap-2 mb-2">
                            <span className="relative flex h-3 w-3">
                                {!isComplete && <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"></span>}
                                <span className={`relative inline-flex rounded-full h-3 w-3 ${isComplete ? 'bg-green-500' : 'bg-primary'}`}></span>
                            </span>
                            <span className="text-sm font-bold text-forest-dark dark:text-white">{isComplete ? 'Terminé' : 'En cours'}</span>
                        </div>
                        <div className="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mb-1">
                            <div className={`h-1.5 rounded-full ${isComplete ? 'bg-green-500' : 'bg-primary'}`} style={{ width: `${progress}%` }}></div>
                        </div>
                        <p className="text-xs text-gray-400 text-right font-sans">{progress}% complété</p>
                    </div>
                </aside>
            );
        };

        const PosNegGrid = ({ positive, difficulty }) => {
            return (
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div className="bg-[#f0fdf4] dark:bg-[#0f291e] p-5 rounded-xl border border-[#bbf7d0] dark:border-[#164230] relative overflow-hidden group">
                        <div className="absolute -right-4 -top-4 bg-[#dcfce7] dark:bg-[#14532d] rounded-full p-6 opacity-50 group-hover:scale-110 transition-transform duration-300"></div>
                        <div className="relative z-10">
                            <div className="flex items-center gap-2 mb-2 text-[#166534] dark:text-[#4ade80]">
                                <span className="material-symbols-outlined">check_circle</span>
                                <span className="font-bold text-sm uppercase font-sans tracking-wider">Points Positifs</span>
                            </div>
                            <p className="text-[#14532d] dark:text-[#bbf7d0] leading-snug">{positive}</p>
                        </div>
                    </div>
                    <div className="bg-[#fffbeb] dark:bg-[#2e2305] p-5 rounded-xl border border-[#fde68a] dark:border-[#634907] relative overflow-hidden group">
                        <div className="absolute -right-4 -top-4 bg-[#fef3c7] dark:bg-[#573e06] rounded-full p-6 opacity-50 group-hover:scale-110 transition-transform duration-300"></div>
                        <div className="relative z-10">
                            <div className="flex items-center gap-2 mb-2 text-[#92400e] dark:text-[#fbbf24]">
                                <span className="material-symbols-outlined">warning</span>
                                <span className="font-bold text-sm uppercase font-sans tracking-wider">Difficultés</span>
                            </div>
                            <p className="text-[#78350f] dark:text-[#fde68a] leading-snug">{difficulty}</p>
                        </div>
                    </div>
                </div>
            );
        };

        const SeanceTemplate = ({ current, title, subtitle, dot = 'primary', children, prev, next }) => {
            const dotClass = dot === 'alert' ? 'bg-alert' : dot === 'danger' ? 'bg-danger' : 'bg-primary';

            return (
                <div className="bg-background-light dark:bg-background-dark font-display text-forest-dark dark:text-gray-200 antialiased overflow-x-hidden flex flex-col min-h-screen">
                    <TopHeader current={current} />
                    <main className="flex-grow flex justify-center py-8 md:py-12 px-4 md:px-10">
                        <div className="max-w-[1024px] w-full flex flex-col md:flex-row gap-8 relative">
                            <SeancesSidebar current={current} />
                            <div className="flex-1 min-w-0">
                                <div className="flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-2 font-sans">
                                    <span>Journal de Bord</span>
                                    <span className="material-symbols-outlined !text-[14px]">chevron_right</span>
                                    <span className="text-forest-dark dark:text-primary font-medium">{title.split(':')[0]}</span>
                                </div>
                                <div className="mb-10">
                                    <h1 className="text-4xl md:text-5xl font-black leading-[1.1] tracking-tight text-forest-dark dark:text-white mb-4">{title}</h1>
                                    <p className="text-xl text-[#61896f] dark:text-[#8cbfaa] italic">{subtitle}</p>
                                </div>

                                <div className="relative pl-8 md:pl-10 border-l-2 border-dashed border-primary/30 dark:border-primary/20 pb-12 last:border-0">
                                    <div className={`absolute -left-[9px] top-0 size-[18px] rounded-full ${dotClass} border-4 border-white dark:border-background-dark shadow-sm`}></div>
                                    <div className="flex flex-col gap-8">
                                        {children}
                                    </div>
                                </div>

                                <BottomArrowsNav prev={prev} next={next} />
                            </div>
                        </div>
                    </main>
                </div>
            );
        };

        const CompteRenduCard = ({ variant = 'primary', children }) => {
            const color = variant === 'alert' ? 'text-alert' : 'text-primary';
            const border = variant === 'alert' ? 'border-alert/20' : 'border-gray-100 dark:border-gray-800';
            const bg = variant === 'alert' ? 'barred-bg' : '';
            const icon = variant === 'alert' ? 'error' : 'edit_note';

            return (
                <div className={`bg-white dark:bg-[#1a3324] p-6 md:p-8 rounded-xl shadow-sm border ${border} ${bg}`.trim()}>
                    <div className={`flex items-center gap-3 mb-4 ${color}`.trim()}>
                        <span className="material-symbols-outlined">{icon}</span>
                        <span className="text-sm font-bold uppercase tracking-wider font-sans">Compte-rendu</span>
                    </div>
                    {children}
                </div>
            );
        };

        const RecitCard = ({ children }) => {
            return (
                <div className="bg-white dark:bg-[#1a3324] p-6 md:p-8 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800">
                    <div className="flex items-center gap-3 mb-4 text-primary">
                        <span className="material-symbols-outlined">auto_stories</span>
                        <span className="text-sm font-bold uppercase tracking-wider font-sans">Récit</span>
                    </div>
                    {children}
                </div>
            );
        };

        const InlineRef = ({ n }) => {
            return (
                <sup className="ml-1 align-super text-xs text-primary font-sans">
                    <a className="hover:underline" href={`#src-${n}`} aria-label={`Source ${n}`}>[{n}]</a>
                </sup>
            );
        };

        const SourcesCard = ({ title = 'Sources', sources = [] }) => {
            if (!sources || sources.length === 0) return null;

            return (
                <div className="bg-white dark:bg-[#1a3324] p-6 md:p-8 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800">
                    <div className="flex items-center gap-3 mb-4 text-primary">
                        <span className="material-symbols-outlined">library_books</span>
                        <span className="text-sm font-bold uppercase tracking-wider font-sans">{title}</span>
                    </div>
                    <ol className="list-decimal pl-5 space-y-3 text-sm text-gray-700 dark:text-gray-300 font-sans">
                        {sources.map((s) => (
                            <li key={s.n} id={`src-${s.n}`} className="scroll-mt-28">
                                <span className="font-medium">{s.authors}</span>
                                {s.date ? <span> ({s.date})</span> : null}
                                <span> — </span>
                                <span className="italic">{s.title}</span>
                                {s.publisher ? <span>, {s.publisher}</span> : null}
                                {s.url ? (
                                    <span>
                                        <span>. </span>
                                        <a className="text-primary hover:underline break-all" href={s.url} target="_blank" rel="noreferrer">{s.url}</a>
                                    </span>
                                ) : null}
                            </li>
                        ))}
                    </ol>
                </div>
            );
        };

        // --- Séance 1 ---
        const Seance1 = () => {
            const sources = [
                {
                    n: 1,
                    authors: 'The Guardian',
                    date: '10 déc. 2019',
                    title: 'Greta Thunberg labelled a \'brat\' by Brazil\'s far-right leader Jair Bolsonaro',
                    publisher: 'Tom Phillips',
                    url: 'https://www.theguardian.com/environment/2019/dec/10/greta-thunberg-jair-bolsonaro-brazil-indigenous-amazon'
                },
                {
                    n: 2,
                    authors: 'France 24 (avec AFP)',
                    date: '19 nov. 2021',
                    title: 'Brésil : la déforestation en Amazonie continue à un rythme effréné',
                    publisher: 'France 24',
                    url: 'https://www.france24.com/fr/am%C3%A9riques/20211119-br%C3%A9sil-la-d%C3%A9forestation-en-amazonie-continue-%C3%A0-un-rythme-effr%C3%A9n%C3%A9'
                },
                {
                    n: 3,
                    authors: 'United Nations Web TV',
                    date: '23 sept. 2019',
                    title: 'Greta Thunberg — Opening of the Climate Action Summit 2019 (video)',
                    publisher: 'UN Web TV',
                    url: 'https://media.un.org/en/asset/k10/k10j9y1q2v'
                },
                {
                    n: 4,
                    authors: 'WWF France',
                    title: "L’Amazonie, une forêt tropicale en danger",
                    publisher: 'WWF France',
                    url: 'https://www.wwf.fr/espaces-prioritaires/amazonie'
                },
            ];

            return (
                <SeanceTemplate
                    current="/"
                    title="SÉANCE 1 : Constitution du groupe et premières pistes"
                    subtitle="Définir notre sujet et nos rôles."
                    dot="primary"
                    prev={null}
                    next={{ to: '/seance-2', label: 'Séance 2' }}
                >
                    <CompteRenduCard>
                        <p className="text-lg leading-relaxed text-forest-dark dark:text-gray-200 mb-4">
                            <strong className="text-forest-dark dark:text-gray-100 font-bold">Formation de l'équipe :</strong> Le groupe a été formé par tirage au sort. Nous avons pris du temps pour organiser notre dynamique de travail.
                        </p>
                        <p className="text-lg leading-relaxed text-forest-dark dark:text-gray-200 mb-6">
                            <strong className="text-forest-dark dark:text-gray-100 font-bold">Choix du sujet :</strong> Nous avons convergé vers une thématique environnementale et choisi <strong className="text-primary font-bold">l'Amazonie</strong>.
                        </p>
                        <div className="bg-background-light dark:bg-black/20 p-5 rounded-lg border border-gray-200 dark:border-gray-700">
                            <h3 className="font-bold text-lg mb-3 flex items-center gap-2">
                                <span className="material-symbols-outlined text-gray-500">theater_comedy</span>
                                Piste de scénario (idée initiale)
                            </h3>
                            <p className="text-base text-gray-600 dark:text-gray-300">
                                <strong className="text-forest-dark dark:text-gray-100 font-bold">Ébauche :</strong> opposition entre Jair Bolsonaro (politique de déforestation) et les peuples autochtones, avec l'idée (ensuite remise en cause) d'intégrer Greta Thunberg.
                                <span className="ml-1">Exemple de tension médiatique : en 2019, Bolsonaro a publiquement insulté Greta Thunberg.</span>
                                <InlineRef n={1} />
                            </p>
                        </div>
                    </CompteRenduCard>

                    {/* Image 1 : Forêt amazonienne */}
                    <figure className="bg-white dark:bg-[#1a3324] p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800 overflow-hidden group">
                        <img 
                            src="https://images.unsplash.com/photo-1593069567131-53a0614dde1d?q=80&w=1932&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" 
                            alt="Forêt amazonienne luxuriante" 
                            className="w-full h-80 object-cover rounded-lg group-hover:scale-105 transition-transform duration-500"
                            loading="lazy"
                        />
                        <figcaption className="text-sm text-gray-600 dark:text-gray-400 mt-3 text-center font-sans italic">La canopée amazonienne, poumon vert de la planète menacé par la déforestation</figcaption>
                    </figure>

                    <RecitCard>
                        <div className="space-y-4 text-lg leading-relaxed text-forest-dark dark:text-gray-200">
                            <p>
                                Le groupe a été formé par tirage au sort. Dès le début, on a clarifié la façon de travailler : répartir les tâches, se mettre d’accord sur une méthode,
                                et définir rapidement un sujet exploitable pour l’EMC.
                            </p>
                            <p>
                                L’Amazonie s’est imposée parce qu’elle permet d’aborder un conflit actuel avec des acteurs identifiables.
                                On a cadré l’opposition principale : d’un côté des décisions politiques et des intérêts économiques liés à l’exploitation (agriculture, bois, mines),
                                de l’autre la protection de la forêt, des populations autochtones et de la biodiversité.
                                <InlineRef n={2} />
                                <InlineRef n={4} />
                            </p>
                            <p>
                                On a rédigé une première piste de scénario : Bolsonaro face aux peuples autochtones, avec l’idée (provisoire) d’intégrer Greta Thunberg.
                                À ce stade, l’objectif était surtout de poser un conflit clair et une progression de scènes, quitte à ajuster ensuite pour rester crédibles.
                                <span className="ml-1">Greta est surtout une figure de mobilisation internationale (par exemple à l’ONU), ce qui rend sa présence sur le terrain moins évidente.</span>
                                <InlineRef n={3} />
                            </p>
                        </div>
                    </RecitCard>

                    <PosNegGrid
                        positive="La dynamique de groupe est bonne. Le sujet Amazonie offre beaucoup de ressources et permet d'aborder l'EMC sous plusieurs angles."
                        difficulty="Intégrer Greta Thunberg de façon réaliste dans une scène au Brésil paraît difficile : son rôle est plus symbolique qu'actif sur le terrain."
                    />

                    <SourcesCard sources={sources} />
                </SeanceTemplate>
            );
        };

        // --- Séance 2 ---
        const Seance2 = () => {
            const sources = [
                {
                    n: 1,
                    authors: 'Haut-Commissariat des Nations unies aux droits de l\'homme (OHCHR)',
                    date: 'oct. 2009',
                    title: 'Les populations autochtones revendiquent la reconnaissance de leurs savoirs traditionnels pour gérer l\'environnement',
                    publisher: 'ONU — OHCHR (FR)',
                    url: 'https://www.ohchr.org/fr/press-releases/2009/10/default-title-582'
                },
                {
                    n: 2,
                    authors: 'Amnesty International',
                    date: '26 nov. 2019',
                    title: 'Brésil. Il faut mettre fin à l\'élevage illégal de bétail qui alimente la destruction de la forêt tropicale amazonienne',
                    publisher: 'Amnesty International (FR)',
                    url: 'https://www.amnesty.org/fr/latest/news/2019/11/brazil-halt-illegal-cattle-farms-fuelling-amazon-rainforest-destruction/'
                },
                {
                    n: 3,
                    authors: 'Pauline Fricot (avec AFP)',
                    date: '24 nov. 2021',
                    title: 'Malgré les promesses de Jair Bolsonaro, la déforestation en Amazonie n\'a pas cessé d\'augmenter',
                    publisher: 'Novethic',
                    url: 'https://www.novethic.fr/actualite/environnement/agriculture/isr-rse/la-deforestation-en-amazonie-augmente-sous-le-mandat-de-bolsonaro-150330.html'
                },
                {
                    n: 4,
                    authors: 'Amnesty International',
                    date: '2019',
                    title: 'Brésil. Risque d\'effusion de sang en Amazonie si les autorités ne protègent pas les peuples indigènes',
                    publisher: 'Amnesty International (FR)',
                    url: 'https://www.amnesty.org/fr/latest/press-release/2019/05/brazil-risk-of-bloodshed-in-the-amazon-unless-government-protects-indigenous-peoples-from-illegal-land-seizures-and-logging/'
                },
                {
                    n: 5,
                    authors: 'Haut-Commissariat des Nations unies aux droits de l\'homme (OHCHR)',
                    date: '2022',
                    title: 'Dans la forêt amazonienne, une tribu autochtone se bat pour sa survie',
                    publisher: 'ONU — OHCHR (FR)',
                    url: 'https://www.ohchr.org/fr/stories/2022/08/amazon-rainforest-indigenous-tribe-fights-survival'
                },
            ];

            return (
                <SeanceTemplate
                    current="/seance-2"
                    title="SÉANCE 2 : Confrontation au réel et réajustements"
                    subtitle="Analyse critique du scénario et décisions structurantes."
                    dot="primary"
                    prev={{ to: '/', label: 'Séance 1' }}
                    next={{ to: '/inter-seance', label: 'Inter-Séance' }}
                >
                    <CompteRenduCard>
                        <p className="text-lg leading-relaxed text-forest-dark dark:text-gray-200 mb-4">
                            <strong className="text-forest-dark dark:text-gray-100 font-bold">Analyse :</strong> Nous avons relu notre scénario et discuté des contraintes de mise en scène (cohérence, réalisme, rôles utiles).
                        </p>
                        <p className="text-lg leading-relaxed text-forest-dark dark:text-gray-200 mb-6">
                            <strong className="text-forest-dark dark:text-gray-100 font-bold">Décision majeure :</strong> le personnage de Greta a été supprimé pour plus de réalisme. Malgré l'absence d'Hector, nous avons continué à structurer l'histoire.
                        </p>
                        <div className="bg-background-light dark:bg-black/20 p-5 rounded-lg border border-gray-200 dark:border-gray-700">
                            <h3 className="font-bold text-lg mb-3 flex items-center gap-2">
                                <span className="material-symbols-outlined text-gray-500">edit</span>
                                Atelier d'écriture
                            </h3>
                            <p className="text-base text-gray-600 dark:text-gray-300">Le groupe débat sur la pertinence des personnages secondaires et clarifie les scènes clés.</p>
                        </div>
                    </CompteRenduCard>

                    <RecitCard>
                        <div className="space-y-4 text-lg leading-relaxed text-forest-dark dark:text-gray-200">
                            <p>
                                Pendant la séance 2, on a relu le scénario et repéré ce qui posait problème en termes de cohérence et de réalisme.
                            </p>
                            <p>
                                On a donc décidé de supprimer Greta Thunberg : dans notre contexte, sa présence rendait la scène moins crédible. Car elle ne s'est jamais rendue en Amazonie,
                                et on s'est recentrés sur des acteurs directement liés au terrain et aux décisions : responsables politiques, représentants locaux,
                                populations concernées, et points de vue opposés (développement économique vs protection).
                                <span className="ml-1">Pour cadrer nos arguments, on s’est appuyés sur des sources qui décrivent à la fois les mécanismes de déforestation et le contexte politique (application des lois, pressions sur les acteurs).</span>
                                <InlineRef n={1} />
                                <InlineRef n={2} />
                            </p>
                            <p>
                                Le but était de garder une histoire simple à jouer tout en montrant les mécanismes : arguments économiques utilisés pour justifier la déforestation,
                                contestation par les populations et les ONG, et conséquences concrètes (perte de terres, atteintes à la biodiversité).
                                <InlineRef n={3} />
                                <InlineRef n={4} />
                                <InlineRef n={5} />
                            </p>
                        </div>
                    </RecitCard>

                    {/* Image 2 : Rivière amazonienne */}
                    <figure className="bg-white dark:bg-[#1a3324] p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800 overflow-hidden group">
                        <img 
                            src="https://images.unsplash.com/photo-1694614360428-608d018bb054?q=80&w=774&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" 
                            alt="Rivière en Amazonie" 
                            className="w-full h-80 object-cover rounded-lg group-hover:scale-105 transition-transform duration-500"
                            loading="lazy"
                        />
                        <figcaption className="text-sm text-gray-600 dark:text-gray-400 mt-3 text-center font-sans italic">Les cours d'eau amazoniens, artères vitales d'un écosystème complexe</figcaption>
                    </figure>

                    <PosNegGrid
                        positive="L'autocritique a solidifié l'intrigue : le scénario est plus cohérent après la suppression d'un personnage superflu."
                        difficulty="L'absence d'un membre ralentit l'avancée et oblige à clarifier la répartition des tâches."
                    />

                    <SourcesCard sources={sources} />
                </SeanceTemplate>
            );
        };

        // --- Inter-Séance (entre 2 et 3) ---
        const InterSeance = () => {
            const sources = [
                {
                    n: 1,
                    authors: 'Bibliothèque nationale de France (BnF)',
                    date: 'consulté en 2026',
                    title: "Notice d’autorité : Qin Shi Huangdi (259?-210 av. J.-C.)",
                    publisher: 'data.bnf.fr',
                    url: 'https://data.bnf.fr/fr/11897975/qin_shi_huangdi/'
                },
                {
                    n: 2,
                    authors: 'Encyclopaedia Britannica',
                    date: 'consulté en 2026',
                    title: 'Qin Shihuang (emperor of Qin dynasty)',
                    publisher: 'Britannica',
                    url: 'https://www.britannica.com/biography/Qin-Shi-Huang'
                },
            ];

            return (
                <SeanceTemplate
                    current="/inter-seance"
                    title="INTER-SÉANCE : Impasse (fausse piste)"
                    subtitle="Travail à distance : hésitations, piste alternative, puis abandon après vérification des consignes."
                    dot="alert"
                    prev={{ to: '/seance-2', label: 'Séance 2' }}
                    next={{ to: '/seance-3', label: 'Séance 3' }}
                >
                    <CompteRenduCard variant="alert">
                        <p className="text-lg leading-relaxed text-forest-dark dark:text-gray-200 mb-4">
                            <strong className="text-forest-dark dark:text-gray-100 font-bold">Remise en question :</strong> N'étant plus sûrs de notre sujet "Amazonie", nous avons cherché à distance une alternative. Nous avons choisi de parler du premier empereur chinois Qin Shi Huang. 
                            <InlineRef n={1} />
                            <InlineRef n={2} />
                        </p>
                        <p className="text-lg leading-relaxed text-forest-dark dark:text-gray-200 mb-6">
                            <strong className="text-forest-dark dark:text-gray-100 font-bold">Vérification :</strong> après qu'un membre du groupe se soit rappelé les consignes, nous avons constaté que la piste envisagée était hors-thème car le sujet est trop ancien. Nous l'avons abandonnée.
                        </p>
                         <p className="text-lg leading-relaxed text-forest-dark dark:text-gray-200 mb-6">
                            <strong className="text-forest-dark dark:text-gray-100 font-bold">Retour à l'amazonie :</strong>                                 On est revenus à l’Amazonie avec un objectif plus précis : garder le sujet, mais mieux le limiter (décisions politiques, intérêts économiques,
                                et impacts sur les populations et l’environnement).
                        </p>
                       
                    </CompteRenduCard>



                    <PosNegGrid
                        positive="La communication à distance montre une vraie volonté d'implication dans le projet et montre une recherche constante."
                        difficulty="Une compréhension initiale insuffisante des consignes nous a fait perdre du temps sur une piste hors-sujet."
                    />

                    <SourcesCard sources={sources} />
                </SeanceTemplate>
            );
        };

        // --- Séance 3 ---
        const Seance3 = () => {
            const sources = [
                {
                    n: 1,
                    authors: 'Wikipédia',
                    title: "Giovanni Falcone: magistrat italien tué par la Mafia (1939-1992)",
                    publisher: 'Wikipédia',
                    url: 'https://fr.wikipedia.org/wiki/Giovanni_Falcone'
                    
                },
            ];

            return (
                <SeanceTemplate
                    current="/seance-3"
                    title="SÉANCE 3 : Impasse et recentrage"
                    subtitle="Tentatives, validation professeur, puis retour à l'Amazonie."
                    dot="danger"
                    prev={{ to: '/inter-seance', label: 'Inter-Séance' }}
                    next={null}
                >


                    <RecitCard>
                        <div className="space-y-4 text-lg leading-relaxed text-forest-dark dark:text-gray-200">
                            <p>
                                En séance 3, on a testé une autre piste : la mafia italienne car Pauline a des origines italiennes, nous vouions explorer l'importance de la mafia dans la société italienne avec par exemple l'assasinat de Giovani Falcone.
                                Le sujet était intéressant, mais difficile à traiter correctement dans le cadre et le temps disponibles.

                                <InlineRef n={1} />
                            </p>
                            <p>
                                Le professeur a confirmé que c’était trop complexe et trop éloigné de notre objectif.
                                Décision : abandonner et revenir à l’Amazonie.
                            </p>
                            <p>
                                On a repris l’Amazonie en visant un scénario plus cadré : expliquer les mécanismes de la déforestation,
                                montrer les arguments économiques et les décisions politiques, puis représenter les conséquences sur les populations et la biodiversité.
                            </p>
                        </div>
                    </RecitCard>

                    {/* Image 3 : Biodiversité amazonienne */}
                    <figure className="bg-white dark:bg-[#1a3324] p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800 overflow-hidden group">
                        <img 
                            src="https://plus.unsplash.com/premium_photo-1687440854310-b58abd7fe9f4?q=80&w=1480&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" 
                            alt="Biodiversité en Amazonie" 
                            className="w-full h-80 object-cover rounded-lg group-hover:scale-105 transition-transform duration-500"
                            loading="lazy"
                        />
                        <figcaption className="text-sm text-gray-600 dark:text-gray-400 mt-3 text-center font-sans italic">L'écosystème amazonien, trésor de biodiversité au cœur des tensions économiques et environnementales</figcaption>
                    </figure>

                    <PosNegGrid
                        positive="Le cadrage professeur évite de s'enliser : le groupe rebondit vite et relance les recherches documentaires."
                        difficulty="Une séance a été consommée sur une fausse piste, créant un retard et un moment de flottement avant le recentrage."
                    />

                    <SourcesCard sources={sources} />
                </SeanceTemplate>
            );
        };


        const App = () => {
            return (
                <MemoryRouter>
                    <Routes>
                        <Route path="/" element={<Seance1 />} />
                        <Route path="/seance-2" element={<Seance2 />} />
                        <Route path="/inter-seance" element={<InterSeance />} />
                        <Route path="/seance-3" element={<Seance3 />} />
                    </Routes>
                </MemoryRouter>
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>

    <script>
        // System preference detection for dark mode (Runs outside React to prevent FOUC)
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
    </script>
</body>
</html>
