<!DOCTYPE html>
<html class="light" lang="fr">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Journal de Bord - Amazonie Project</title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,opsz,wght@0,6..72,200..800;1,6..72,200..800&amp;family=Noto+Sans:wght@400;500;700&amp;display=swap" rel="stylesheet"/>
    <!-- Material Symbols -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script id="tailwind-config">
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              "primary": "#11d452",
              "primary-dark": "#0ea640",
              "background-light": "#f6f8f6",
              "background-dark": "#102216",
              "card-light": "#ffffff",
              "card-dark": "#1a2e22",
              "text-main": "#111813",
              "text-dark": "#f0f4f2",
              "muted-green": "#61896f",
              "forest-dark": "#1e3a29",
              "earth-light": "#e8e6df",
              "alert": "#ef4444",
              "alert-soft": "#fef2f2",
              "danger": "#e3342f",
              "paper": "#ffffff",
              "paper-dark": "#1a2c20",
            },
            fontFamily: {
              "display": ["Newsreader", "serif"],
              "sans": ["Noto Sans", "sans-serif"],
              "body": ["Noto Sans", "sans-serif"],
            },
            borderRadius: {"DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "2xl": "1rem", "full": "9999px"},
            boxShadow: {
              'soft': '0 4px 20px -2px rgba(0, 0, 0, 0.05)',
            },
          },
        },
      }
    </script>

    <style>
        .barred-bg {
            background-size: 20px 20px;
            background-image: repeating-linear-gradient(
                45deg,
                rgba(239, 68, 68, 0.03),
                rgba(239, 68, 68, 0.03) 10px,
                rgba(239, 68, 68, 0.08) 10px,
                rgba(239, 68, 68, 0.08) 20px
            );
        }
        .strikethrough-red {
            position: relative;
            display: inline-block;
        }
        .strikethrough-red::after {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            width: 100%;
            height: 3px;
            background-color: #e3342f;
            transform: rotate(-5deg);
            opacity: 0.8;
        }
        .paper-texture {
            background-image: linear-gradient(#f6f8f6 2px, transparent 2px), linear-gradient(90deg, #f6f8f6 2px, transparent 2px);
            background-size: 40px 40px, 40px 40px;
            background-position: -2px -2px, -2px -2px;
        }
        .dark .paper-texture {
             background-image: linear-gradient(#1a2c20 2px, transparent 2px), linear-gradient(90deg, #1a2c20 2px, transparent 2px);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- React Dependencies -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/history@5/umd/history.development.js"></script>
    <script src="https://unpkg.com/react-router@6.3.0/umd/react-router.development.js"></script>
    <script src="https://unpkg.com/react-router-dom@6.3.0/umd/react-router-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <script type="text/babel">
        const { useState } = React;
        const { createRoot } = ReactDOM;
        const { MemoryRouter, Routes, Route, Link } = ReactRouterDOM;

        const TopHeader = ({ current }) => {
            const [mobileOpen, setMobileOpen] = useState(false);
            const [seancesOpen, setSeancesOpen] = useState(false);

            const seanceLinks = [
                { to: '/', label: 'Séance 1' },
                { to: '/seance-2', label: 'Séance 2' },
                { to: '/inter-seance', label: 'Inter-Séance' },
                { to: '/seance-3', label: 'Séance 3' },
                { to: '/seance-4', label: 'Séance 4' },
            ];

            const isActive = (path) => current === path;
            const isSeancesSection = seanceLinks.some((l) => l.to === current);

            const baseLink = 'text-forest-dark dark:text-gray-300 hover:text-primary transition-colors text-base font-medium leading-normal';
            const activeLink = "text-primary text-base font-bold leading-normal relative after:content-[''] after:absolute after:bottom-[-22px] after:left-0 after:w-full after:h-[2px] after:bg-primary";

            return (
                <header className="border-b border-solid border-b-[#e0e4e2] dark:border-b-gray-800 bg-white/95 dark:bg-[#152e20]/95 backdrop-blur-md px-4 md:px-10 py-3 sticky top-0 z-50">
                    <div className="flex items-center justify-between whitespace-nowrap">
                        <div className="flex items-center gap-4 text-forest-dark dark:text-white">
                            <div className="size-8 text-primary flex items-center justify-center">
                                <span className="material-symbols-outlined !text-[32px]">forest</span>
                            </div>
                            <h2 className="text-forest-dark dark:text-white text-xl font-bold leading-tight tracking-[-0.015em]">Carnet de Bord EMC</h2>
                        </div>

                        <div className="flex flex-1 justify-end gap-4 items-center">
                            <nav className="hidden md:flex items-center gap-9">
                                <Link className={isActive('/') ? activeLink : baseLink} to="/">Accueil</Link>
                                <Link className={isActive('/projet') ? activeLink : baseLink} to="/projet">Le Projet</Link>

                                <div className="relative">
                                    <button
                                        type="button"
                                        className={isSeancesSection ? activeLink : baseLink}
                                        onClick={() => setSeancesOpen((v) => !v)}
                                    >
                                        Séances
                                        <span className="material-symbols-outlined align-middle ml-1 !text-[18px]">expand_more</span>
                                    </button>
                                    {seancesOpen && (
                                        <div
                                            className="absolute right-0 mt-3 w-56 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-[#152e20] shadow-lg overflow-hidden"
                                            onMouseLeave={() => setSeancesOpen(false)}
                                        >
                                            {seanceLinks.map((item) => (
                                                <Link
                                                    key={item.to}
                                                    to={item.to}
                                                    className="block px-4 py-2.5 text-sm font-medium text-forest-dark dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-white/10"
                                                    onClick={() => setSeancesOpen(false)}
                                                >
                                                    {item.label}
                                                </Link>
                                            ))}
                                        </div>
                                    )}
                                </div>

                                <Link className={isActive('/ressources') ? activeLink : baseLink} to="/ressources">Ressources</Link>
                            </nav>

                            <button
                                type="button"
                                className="md:hidden text-forest-dark dark:text-gray-200"
                                onClick={() => setMobileOpen((v) => !v)}
                                aria-label="Ouvrir le menu"
                            >
                                <span className="material-symbols-outlined">menu</span>
                            </button>
                        </div>
                    </div>

                    {mobileOpen && (
                        <div className="md:hidden mt-3 pb-2 border-t border-gray-100 dark:border-gray-800">
                            <div className="flex flex-col gap-1 pt-3">
                                <Link className="px-2 py-2 rounded-lg hover:bg-gray-50 dark:hover:bg-white/10" to="/" onClick={() => setMobileOpen(false)}>Accueil</Link>
                                <Link className="px-2 py-2 rounded-lg hover:bg-gray-50 dark:hover:bg-white/10" to="/projet" onClick={() => setMobileOpen(false)}>Le Projet</Link>
                                <Link className="px-2 py-2 rounded-lg hover:bg-gray-50 dark:hover:bg-white/10" to="/ressources" onClick={() => setMobileOpen(false)}>Ressources</Link>
                                <div className="px-2 pt-2 text-xs uppercase tracking-wider text-gray-500 dark:text-gray-400 font-sans font-bold">Séances</div>
                                {seanceLinks.map((item) => (
                                    <Link
                                        key={item.to}
                                        className="px-2 py-2 rounded-lg hover:bg-gray-50 dark:hover:bg-white/10"
                                        to={item.to}
                                        onClick={() => setMobileOpen(false)}
                                    >
                                        {item.label}
                                    </Link>
                                ))}
                            </div>
                        </div>
                    )}
                </header>
            );
        };

        const BottomArrowsNav = ({ prev, next }) => {
            return (
                <div className="flex items-center justify-between pt-8 mt-4 border-t border-gray-100 dark:border-[#2a3e32]">
                    {prev ? (
                        <Link className="group flex items-center gap-3 text-gray-500 dark:text-gray-400 hover:text-text-main dark:hover:text-white transition-colors" to={prev.to}>
                            <div className="w-8 h-8 rounded-full border border-gray-200 dark:border-gray-700 flex items-center justify-center group-hover:bg-gray-100 dark:group-hover:bg-[#2a3e32]">
                                <span className="material-symbols-outlined text-sm">arrow_back</span>
                            </div>
                            <span className="text-sm font-medium">{prev.label}</span>
                        </Link>
                    ) : (
                        <div />
                    )}

                    {next ? (
                        <Link className="group flex items-center gap-3 text-primary hover:text-primary/80 transition-colors" to={next.to}>
                            <span className="text-sm font-bold">{next.label}</span>
                            <div className="w-8 h-8 rounded-full bg-primary flex items-center justify-center text-white shadow-md group-hover:shadow-lg group-hover:scale-105 transition-all">
                                <span className="material-symbols-outlined text-sm">arrow_forward</span>
                            </div>
                        </Link>
                    ) : (
                        <div />
                    )}
                </div>
            );
        };

        const SeancesSidebar = ({ current }) => {
            const links = [
                { to: '/', label: 'Séance 1' },
                { to: '/seance-2', label: 'Séance 2' },
                { to: '/inter-seance', label: 'Inter-Séance' },
                { to: '/seance-3', label: 'Séance 3' },
                { to: '/seance-4', label: 'Séance 4' },
            ];

            const base = "pl-4 py-2 text-sm text-gray-500 hover:text-forest-dark dark:text-gray-400 dark:hover:text-gray-200 transition-colors";
            const active = "pl-4 py-2 text-sm font-medium border-l-2 border-primary -ml-[2px] text-forest-dark dark:text-white";

            return (
                <aside className="hidden md:flex flex-col w-64 shrink-0 sticky top-24 h-fit gap-6">
                    <div>
                        <p className="text-xs uppercase tracking-wider text-gray-500 dark:text-gray-400 font-sans font-bold mb-3">Navigation</p>
                        <nav className="flex flex-col gap-1 border-l-2 border-gray-200 dark:border-gray-700 ml-2">
                            {links.map((l) => (
                                <Link key={l.to} className={current === l.to ? active : base} to={l.to}>
                                    {l.label}
                                </Link>
                            ))}
                        </nav>
                    </div>
                    <div className="bg-white dark:bg-[#1a3324] p-4 rounded-xl border border-gray-100 dark:border-gray-800 shadow-sm">
                        <p className="text-xs uppercase tracking-wider text-gray-500 dark:text-gray-400 font-sans font-bold mb-2">Statut du Projet</p>
                        <div className="flex items-center gap-2 mb-2">
                            <span className="relative flex h-3 w-3">
                                <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"></span>
                                <span className="relative inline-flex rounded-full h-3 w-3 bg-primary"></span>
                            </span>
                            <span className="text-sm font-bold text-forest-dark dark:text-white">En cours</span>
                        </div>
                        <div className="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mb-1">
                            <div className="bg-primary h-1.5 rounded-full" style={{ width: '15%' }}></div>
                        </div>
                        <p className="text-xs text-gray-400 text-right font-sans">15% complété</p>
                    </div>
                </aside>
            );
        };

        const PosNegGrid = ({ positive, difficulty }) => {
            return (
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div className="bg-[#f0fdf4] dark:bg-[#0f291e] p-5 rounded-xl border border-[#bbf7d0] dark:border-[#164230] relative overflow-hidden group">
                        <div className="absolute -right-4 -top-4 bg-[#dcfce7] dark:bg-[#14532d] rounded-full p-6 opacity-50 group-hover:scale-110 transition-transform duration-300"></div>
                        <div className="relative z-10">
                            <div className="flex items-center gap-2 mb-2 text-[#166534] dark:text-[#4ade80]">
                                <span className="material-symbols-outlined">check_circle</span>
                                <span className="font-bold text-sm uppercase font-sans tracking-wider">Points Positifs</span>
                            </div>
                            <p className="text-[#14532d] dark:text-[#bbf7d0] leading-snug">{positive}</p>
                        </div>
                    </div>
                    <div className="bg-[#fffbeb] dark:bg-[#2e2305] p-5 rounded-xl border border-[#fde68a] dark:border-[#634907] relative overflow-hidden group">
                        <div className="absolute -right-4 -top-4 bg-[#fef3c7] dark:bg-[#573e06] rounded-full p-6 opacity-50 group-hover:scale-110 transition-transform duration-300"></div>
                        <div className="relative z-10">
                            <div className="flex items-center gap-2 mb-2 text-[#92400e] dark:text-[#fbbf24]">
                                <span className="material-symbols-outlined">warning</span>
                                <span className="font-bold text-sm uppercase font-sans tracking-wider">Difficultés</span>
                            </div>
                            <p className="text-[#78350f] dark:text-[#fde68a] leading-snug">{difficulty}</p>
                        </div>
                    </div>
                </div>
            );
        };

        const SeanceTemplate = ({ current, title, subtitle, dot = 'primary', children, prev, next }) => {
            const dotClass = dot === 'alert' ? 'bg-alert' : dot === 'danger' ? 'bg-danger' : 'bg-primary';

            return (
                <div className="bg-background-light dark:bg-background-dark font-display text-forest-dark dark:text-gray-200 antialiased overflow-x-hidden flex flex-col min-h-screen">
                    <TopHeader current={current} />
                    <main className="flex-grow flex justify-center py-8 md:py-12 px-4 md:px-10">
                        <div className="max-w-[1024px] w-full flex flex-col md:flex-row gap-8 relative">
                            <SeancesSidebar current={current} />
                            <div className="flex-1 min-w-0">
                                <div className="flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-2 font-sans">
                                    <span>Journal de Bord</span>
                                    <span className="material-symbols-outlined !text-[14px]">chevron_right</span>
                                    <span className="text-forest-dark dark:text-primary font-medium">{title.split(':')[0]}</span>
                                </div>
                                <div className="mb-10">
                                    <h1 className="text-4xl md:text-5xl font-black leading-[1.1] tracking-tight text-forest-dark dark:text-white mb-4">{title}</h1>
                                    <p className="text-xl text-[#61896f] dark:text-[#8cbfaa] italic">{subtitle}</p>
                                </div>

                                <div className="relative pl-8 md:pl-10 border-l-2 border-dashed border-primary/30 dark:border-primary/20 pb-12 last:border-0">
                                    <div className={`absolute -left-[9px] top-0 size-[18px] rounded-full ${dotClass} border-4 border-white dark:border-background-dark shadow-sm`}></div>
                                    <div className="flex flex-col gap-8">
                                        {children}
                                    </div>
                                </div>

                                <BottomArrowsNav prev={prev} next={next} />
                            </div>
                        </div>
                    </main>
                </div>
            );
        };

        const CompteRenduCard = ({ variant = 'primary', children }) => {
            const color = variant === 'alert' ? 'text-alert' : 'text-primary';
            const border = variant === 'alert' ? 'border-alert/20' : 'border-gray-100 dark:border-gray-800';
            const bg = variant === 'alert' ? 'barred-bg' : '';
            const icon = variant === 'alert' ? 'error' : 'edit_note';

            return (
                <div className={`bg-white dark:bg-[#1a3324] p-6 md:p-8 rounded-xl shadow-sm border ${border} ${bg}`.trim()}>
                    <div className={`flex items-center gap-3 mb-4 ${color}`.trim()}>
                        <span className="material-symbols-outlined">{icon}</span>
                        <span className="text-sm font-bold uppercase tracking-wider font-sans">Compte-rendu</span>
                    </div>
                    {children}
                </div>
            );
        };

        const RecitCard = ({ children }) => {
            return (
                <div className="bg-white dark:bg-[#1a3324] p-6 md:p-8 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800">
                    <div className="flex items-center gap-3 mb-4 text-primary">
                        <span className="material-symbols-outlined">auto_stories</span>
                        <span className="text-sm font-bold uppercase tracking-wider font-sans">Récit</span>
                    </div>
                    {children}
                </div>
            );
        };

        // --- Séance 1 ---
        const Seance1 = () => {
            return (
                <SeanceTemplate
                    current="/"
                    title="SÉANCE 1 : Constitution du groupe et premières pistes"
                    subtitle="Définir notre sujet et nos rôles."
                    dot="primary"
                    prev={null}
                    next={{ to: '/seance-2', label: 'Séance 2' }}
                >
                    <CompteRenduCard>
                        <p className="text-lg leading-relaxed text-forest-dark dark:text-gray-200 mb-4">
                            <strong className="text-forest-dark dark:text-gray-100 font-bold">Formation de l'équipe :</strong> Le groupe a été formé par tirage au sort. Nous avons pris du temps pour organiser notre dynamique de travail.
                        </p>
                        <p className="text-lg leading-relaxed text-forest-dark dark:text-gray-200 mb-6">
                            <strong className="text-forest-dark dark:text-gray-100 font-bold">Choix du sujet :</strong> Nous avons convergé vers une thématique environnementale et choisi <strong className="text-primary font-bold">l'Amazonie</strong>.
                        </p>
                        <div className="bg-background-light dark:bg-black/20 p-5 rounded-lg border border-gray-200 dark:border-gray-700">
                            <h3 className="font-bold text-lg mb-3 flex items-center gap-2">
                                <span className="material-symbols-outlined text-gray-500">theater_comedy</span>
                                Piste de scénario (idée initiale)
                            </h3>
                            <p className="text-base text-gray-600 dark:text-gray-300">
                                <strong className="text-forest-dark dark:text-gray-100 font-bold">Ébauche :</strong> opposition entre Jair Bolsonaro (politique de déforestation) et les peuples autochtones, avec l'idée (ensuite remise en cause) d'intégrer Greta Thunberg.
                            </p>
                        </div>
                    </CompteRenduCard>

                    <RecitCard>
                        <div className="space-y-4 text-lg leading-relaxed text-forest-dark dark:text-gray-200">
                            <p>
                                Le groupe a été formé par tirage au sort. Dès le début, on a clarifié la façon de travailler : répartir les tâches, se mettre d’accord sur une méthode,
                                et définir rapidement un sujet exploitable pour l’EMC.
                            </p>
                            <p>
                                L’Amazonie s’est imposée parce qu’elle permet d’aborder un conflit actuel avec des acteurs identifiables.
                                On a cadré l’opposition principale : d’un côté des décisions politiques et des intérêts économiques liés à l’exploitation (agriculture, bois, mines),
                                de l’autre la protection de la forêt, des populations autochtones et de la biodiversité.
                            </p>
                            <p>
                                On a rédigé une première piste de scénario : Bolsonaro face aux peuples autochtones, avec l’idée (provisoire) d’intégrer Greta Thunberg.
                                À ce stade, l’objectif était surtout de poser un conflit clair et une progression de scènes, quitte à ajuster ensuite pour rester crédibles.
                            </p>
                        </div>
                    </RecitCard>

                    <PosNegGrid
                        positive="La dynamique de groupe est bonne. Le sujet Amazonie offre beaucoup de ressources et permet d'aborder l'EMC sous plusieurs angles."
                        difficulty="Intégrer Greta Thunberg de façon réaliste dans une scène au Brésil paraît difficile : son rôle est plus symbolique qu'actif sur le terrain."
                    />
                </SeanceTemplate>
            );
        };

        // --- Séance 2 ---
        const Seance2 = () => {
            return (
                <SeanceTemplate
                    current="/seance-2"
                    title="SÉANCE 2 : Confrontation au réel et réajustements"
                    subtitle="Analyse critique du scénario et décisions structurantes."
                    dot="primary"
                    prev={{ to: '/', label: 'Séance 1' }}
                    next={{ to: '/inter-seance', label: 'Inter-Séance' }}
                >
                    <CompteRenduCard>
                        <p className="text-lg leading-relaxed text-forest-dark dark:text-gray-200 mb-4">
                            <strong className="text-forest-dark dark:text-gray-100 font-bold">Analyse :</strong> Nous avons relu notre scénario et discuté des contraintes de mise en scène (cohérence, réalisme, rôles utiles).
                        </p>
                        <p className="text-lg leading-relaxed text-forest-dark dark:text-gray-200 mb-6">
                            <strong className="text-forest-dark dark:text-gray-100 font-bold">Décision majeure :</strong> le personnage de Greta a été supprimé pour plus de réalisme. Malgré l'absence d'Hector, nous avons continué à structurer l'histoire.
                        </p>
                        <div className="bg-background-light dark:bg-black/20 p-5 rounded-lg border border-gray-200 dark:border-gray-700">
                            <h3 className="font-bold text-lg mb-3 flex items-center gap-2">
                                <span className="material-symbols-outlined text-gray-500">edit</span>
                                Atelier d'écriture
                            </h3>
                            <p className="text-base text-gray-600 dark:text-gray-300">Le groupe débat sur la pertinence des personnages secondaires et clarifie les scènes clés.</p>
                        </div>
                    </CompteRenduCard>

                    <RecitCard>
                        <div className="space-y-4 text-lg leading-relaxed text-forest-dark dark:text-gray-200">
                            <p>
                                Pendant la séance 2, on a relu le scénario et repéré ce qui posait problème en mise en scène : cohérence, réalisme, utilité des personnages,
                                et clarté du message EMC.
                            </p>
                            <p>
                                On a décidé de supprimer Greta Thunberg : dans notre contexte, sa présence rendait la scène moins crédible.
                                On a recentré sur des acteurs directement liés au terrain et aux décisions : responsables politiques, représentants locaux,
                                populations concernées, et points de vue opposés (développement économique vs protection).
                            </p>
                            <p>
                                Le but était de garder une histoire simple à jouer tout en montrant les mécanismes : arguments économiques utilisés pour justifier la déforestation,
                                contestation par les populations et les ONG, et conséquences concrètes (perte de terres, atteintes à la biodiversité).
                            </p>
                        </div>
                    </RecitCard>

                    <PosNegGrid
                        positive="L'autocritique a solidifié l'intrigue : le scénario est plus cohérent après la suppression d'un personnage superflu."
                        difficulty="L'absence d'un membre ralentit l'avancée et oblige à clarifier la répartition des tâches."
                    />
                </SeanceTemplate>
            );
        };

        // --- Inter-Séance (entre 2 et 3) ---
        const InterSeance = () => {
            return (
                <SeanceTemplate
                    current="/inter-seance"
                    title="INTER-SÉANCE : Impasse (fausse piste)"
                    subtitle="Travail à distance : hésitations, piste alternative, puis abandon après vérification des consignes."
                    dot="alert"
                    prev={{ to: '/seance-2', label: 'Séance 2' }}
                    next={{ to: '/seance-3', label: 'Séance 3' }}
                >
                    <CompteRenduCard variant="alert">
                        <p className="text-lg leading-relaxed text-forest-dark dark:text-gray-200 mb-4">
                            <strong className="text-forest-dark dark:text-gray-100 font-bold">Remise en question :</strong> N'étant plus sûrs de notre sujet "Amazonie", nous avons cherché à distance une alternative.
                        </p>
                        <p className="text-lg leading-relaxed text-forest-dark dark:text-gray-200 mb-6">
                            <strong className="text-forest-dark dark:text-gray-100 font-bold">Vérification :</strong> après relecture des consignes, nous avons constaté que la piste envisagée était hors-thème. Nous l'avons abandonnée.
                        </p>
                        <div className="bg-white/70 dark:bg-black/20 p-5 rounded-lg border border-alert/20">
                            <h3 className="font-bold text-lg mb-3 flex items-center gap-2">
                                <span className="material-symbols-outlined text-alert">block</span>
                                Signalement d'impasse
                            </h3>
                            <p className="text-base text-gray-600 dark:text-gray-300">Cette étape sert à documenter l'impasse et le retour aux consignes.</p>
                        </div>
                    </CompteRenduCard>

                    <RecitCard>
                        <div className="space-y-4 text-lg leading-relaxed text-forest-dark dark:text-gray-200">
                            <p>
                                Entre les séances 2 et 3, on a travaillé à distance et on a douté de notre cadrage.
                                On a envisagé une piste alternative en pensant qu’elle serait plus simple à traiter.
                            </p>
                            <p>
                                Après vérification des consignes, on s’est rendu compte que cette piste était hors-thème.
                                On l’a donc abandonnée pour éviter de perdre du temps.
                            </p>
                            <p>
                                On est revenus à l’Amazonie avec un objectif plus précis : garder le sujet, mais mieux le limiter (décisions politiques, intérêts économiques,
                                et impacts sur les populations et l’environnement).
                            </p>
                        </div>
                    </RecitCard>

                    <PosNegGrid
                        positive="La communication à distance a permis d'identifier rapidement le problème et d'éviter d'insister inutilement."
                        difficulty="Une lecture initiale insuffisante des consignes nous a fait perdre du temps sur une piste hors-sujet."
                    />
                </SeanceTemplate>
            );
        };

        // --- Séance 3 ---
        const Seance3 = () => {
            return (
                <SeanceTemplate
                    current="/seance-3"
                    title="SÉANCE 3 : Impasse et recentrage"
                    subtitle="Tentatives, validation professeur, puis retour à l'Amazonie."
                    dot="danger"
                    prev={{ to: '/inter-seance', label: 'Inter-Séance' }}
                    next={{ to: '/seance-4', label: 'Séance 4' }}
                >
                    <CompteRenduCard>
                        <p className="text-lg leading-relaxed text-forest-dark dark:text-gray-200 mb-4">
                            <strong className="text-forest-dark dark:text-gray-100 font-bold">Piste testée :</strong> crise des déchets à Naples ("Terre des Feux"), liant écologie et criminalité.
                        </p>
                        <p className="text-lg leading-relaxed text-forest-dark dark:text-gray-200 mb-6">
                            <strong className="text-forest-dark dark:text-gray-100 font-bold">Retour professeur :</strong> sujet jugé trop complexe et trop éloigné. Décision : abandon et retour à l'Amazonie.
                        </p>
                        <div className="bg-background-light dark:bg-black/20 p-5 rounded-lg border border-gray-200 dark:border-gray-700">
                            <h3 className="font-bold text-lg mb-3 flex items-center gap-2">
                                <span className="material-symbols-outlined text-gray-500">analytics</span>
                                Recentrage
                            </h3>
                            <p className="text-base text-gray-600 dark:text-gray-300">Recentrage sur les mécanismes économiques et politiques de la déforestation amazonienne.</p>
                        </div>
                    </CompteRenduCard>

                    <RecitCard>
                        <div className="space-y-4 text-lg leading-relaxed text-forest-dark dark:text-gray-200">
                            <p>
                                En séance 3, on a testé une autre piste : la crise des déchets à Naples (“Terre des Feux”), qui mélange écologie, santé publique et criminalité.
                                Le sujet était intéressant, mais difficile à traiter correctement dans le cadre et le temps disponibles.
                            </p>
                            <p>
                                Le professeur a confirmé que c’était trop complexe et trop éloigné de notre objectif.
                                Décision : abandonner et revenir à l’Amazonie.
                            </p>
                            <p>
                                On a repris l’Amazonie en visant un scénario plus cadré : expliquer les mécanismes de la déforestation,
                                montrer les arguments économiques et les décisions politiques, puis représenter les conséquences sur les populations et la biodiversité.
                            </p>
                        </div>
                    </RecitCard>

                    <PosNegGrid
                        positive="Le cadrage professeur évite de s'enliser : le groupe rebondit vite et relance les recherches documentaires."
                        difficulty="Une séance a été consommée sur une fausse piste, créant un retard et un moment de flottement avant le recentrage."
                    />
                </SeanceTemplate>
            );
        };

        // --- Séance 4 (placeholder mais format identique) ---
        const Seance4 = () => {
            return (
                <SeanceTemplate
                    current="/seance-4"
                    title="SÉANCE 4 : Statistiques"
                    subtitle="Page à compléter (format conservé pour cohérence)."
                    dot="primary"
                    prev={{ to: '/seance-3', label: 'Séance 3' }}
                    next={null}
                >
                    <CompteRenduCard>
                        <p className="text-lg leading-relaxed text-forest-dark dark:text-gray-200">À compléter.</p>
                    </CompteRenduCard>

                    <RecitCard>
                        <div className="space-y-4 text-lg leading-relaxed text-forest-dark dark:text-gray-200">
                            <p>
                                Cette séance sert à transformer les recherches en éléments concrets pour la mise en scène : chiffres, dates, acteurs et vocabulaire précis.
                                L’objectif est de sélectionner des données utiles, pas d’accumuler des statistiques.
                            </p>
                            <p>
                                Chaque affirmation du scénario doit pouvoir s’appuyer sur un fait (surfaces détruites, conséquences pour les populations,
                                intérêts économiques, rôle des décisions politiques). On vérifiera aussi la cohérence globale.
                            </p>
                        </div>
                    </RecitCard>

                    <PosNegGrid positive="À compléter." difficulty="À compléter." />
                </SeanceTemplate>
            );
        };

        const ProjetPage = () => {
            return (
                <div className="bg-background-light dark:bg-background-dark font-display text-forest-dark dark:text-gray-200 antialiased overflow-x-hidden flex flex-col min-h-screen">
                    <TopHeader current="/projet" />
                    <main className="flex-1 flex justify-center py-10 px-4 md:px-10">
                        <div className="max-w-[960px] w-full">
                            <h1 className="text-4xl md:text-5xl font-black leading-[1.1] tracking-tight text-forest-dark dark:text-white mb-4">Le Projet</h1>
                            <p className="text-lg text-[#61896f] dark:text-[#8cbfaa]">Page de présentation (à compléter).</p>
                            <BottomArrowsNav prev={{ to: '/', label: 'Séance 1' }} next={{ to: '/ressources', label: 'Ressources' }} />
                        </div>
                    </main>
                </div>
            );
        };

        const RessourcesPage = () => {
            return (
                <div className="bg-background-light dark:bg-background-dark font-display text-forest-dark dark:text-gray-200 antialiased overflow-x-hidden flex flex-col min-h-screen">
                    <TopHeader current="/ressources" />
                    <main className="flex-1 flex justify-center py-10 px-4 md:px-10">
                        <div className="max-w-[960px] w-full">
                            <h1 className="text-4xl md:text-5xl font-black leading-[1.1] tracking-tight text-forest-dark dark:text-white mb-4">Ressources</h1>
                            <p className="text-lg text-[#61896f] dark:text-[#8cbfaa]">Liens, sources et documents (à compléter).</p>
                            <BottomArrowsNav prev={{ to: '/projet', label: 'Le Projet' }} next={{ to: '/', label: 'Séance 1' }} />
                        </div>
                    </main>
                </div>
            );
        };

        const App = () => {
            return (
                <MemoryRouter>
                    <Routes>
                        <Route path="/" element={<Seance1 />} />
                        <Route path="/seance-2" element={<Seance2 />} />
                        <Route path="/inter-seance" element={<InterSeance />} />
                        <Route path="/seance-3" element={<Seance3 />} />
                        <Route path="/seance-4" element={<Seance4 />} />
                        <Route path="/projet" element={<ProjetPage />} />
                        <Route path="/ressources" element={<RessourcesPage />} />
                    </Routes>
                </MemoryRouter>
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>

    <script>
        // System preference detection for dark mode (Runs outside React to prevent FOUC)
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
    </script>
</body>
</html>
